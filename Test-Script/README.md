# Almost-RERERE Test Script
This script was used to process the datasets and validate the approach.

## Configuration and configuration instructions:
- **Step 1**: Almost-RERERE uses json-c, you need to clone the repository, compile and install the library. Follow the instructions on <https://github.com/json-c/json-c>.

  After installing the library, depending on your distro and system configuration you might need to reboot the system for the changes to take effect, or execute a command to reload the libraries. In ubuntu/debian distros you can execute:
  ```
  >sudo ldconfig
   ```
- **Step 2**: A 'makefile' is used to compile the script code, You will need to adjust it depending on your development environment, as follow:
   
   macOS - line 25:
   ```
		$(CC) $(CFLAGS) $(LDFLAGS) -o almost-rerere main.c
   ```
  
   Ubuntu - line 25:
    ```   
    	$(CC) $(CFLAGS)  -o almost-rerere main.c $(LDFLAGS)
    ```
   
   Windows:

   It depends on the choice of compiler, version of Make tool and IDE. Check the documentation of your development environment.

- **Step 3**: This script uses the same folder structure as GIT, you need to create the 2 folders in the directory, to do so execute the following commands. *Notice that the '.git' folder will be created as a hidden folder in linux enviroments.*
   ```
    > mkdir .git
    > cd .git
    > mkdir rr-cache
   ```

- **Step 4**: Adjust the paths on the 'configuration.properties' to the absolut path of your folder. For example, the current path for the conflict_file property looks as follows:

   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conflict_file=`/home/almost-rerere/almost-test/`.git/rr-cache/conflict_index.json

   It should be changed to:

   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conflict_file=`/your/local/path/`.git/rr-cache/conflict_index.json

   The path of the 4 properties in the file should be changed.

- **Step 5**: Almost RERERE uses the zlib library, some distributions on linux include it by default, verify that the library is present in the /usr/include folder before trying to compile the script. In case the library is not present, install it before going forward. In ubuntu/debian distros it can be installed with the following command:
   ```
   > sudo apt-get install libz-dev
   ```

- **Step 6**: To compile Almost RERERE execute the following command:
   ```
   > make almost-rerere
   ```
   The process will compile the code and generate a executable file.
   
- **Step 7**: To process a dataset file, execute the script passing the filename as an argument. Example:
   ```
   > ./almost-rerere wro4j.json
   ```
   The script will output information of the progress to the console. The result of the generated resolutions is saved on the *.git/rr-cache/regex_replace_result.txt* in CSV format.
   The columns of the CSV are as follows:
   * Version 1: Version 1 of the conflict
   * Cluster ID: The cluster assigned to the conflict
   * Similatiry: Similarity between the automatic resolution and the developer resolution
   * Regex: Search regular expression applied to the input
   * Replace: Replacement expression applied to the input
   * Developer Resolution: Developers resolution to the conflict
   * Automatic Resolution: Automatic resolution generated by Almost RERERE
   * Version 2: Version 2 of the conflict
   * Developer Decision: Resolution strategy used by the developer(ie. concatenation, combination, etc.)
   * Conflict ID: ID of the conflict

   The columns appear in this order.
    ```
   Version 1, Cluster Id, Similarity, Regex, Replace exp, Developer Resolution, Automatic Resolution, Version 2, Developer Decision, Conflict ID
    ```